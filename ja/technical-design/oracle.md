# Oracle Construction

暗号通貨とDeFiの世界では、**オフチェーンデータをタイムリーかつ正確に取得することが重要です。** スマートコントラクトは外部システムやデータソースに直接アクセスできないため、オラクルは外部情報をブロックチェーンに持ち込むことでこのギャップを埋めます。信頼できるデータサービスを提供することで、決済の透明性と追跡可能性を確保し、可能な争いを最小限に抑える必要があります。

**ChainLink**オラクルサービスは、高い分散化、信頼性、適応性で知られており、SOFAがオフチェーンデータにアクセスするための主要な手段として選ばれました。さらに、ChainLinkの価格フィードを使用することには、**プロトコルを「フラッシュローン攻撃」から保護するという追加の利点があります**。また、**データフィードのソースはCoinbaseなどの信頼できる取引プラットフォームから取得され、データの完全性が保証されます。**

![](../../static/chainlink.png)

SOFAは、[APRO Oracle](https://www.apro.com)を利用して複数のチェーン上で資産を保護しています。**APRO Oracle**からのサポートと保護により、オンチェーン資産の安定性とセキュリティを維持することができます。詳細については、[APRO Oracleのドキュメント](https://docs.apro.com/en)をご参照ください。

![](../../static/apro.jpg)

## スポット価格 / 期限時の価格

オラクルを通じてオンチェーンで基礎資産の現在の価格を取得する方法は通常、2つの方法のいずれかです：

- UniswapのようなDEXから契約を呼び出して基礎資産の価格またはTWAP価格を取得する
- ChainLinkのようなオラクルサービスが提供するデータフィードを通じて資産価格を取得する

決済価格がCeFi取引所の価格にできるだけ近くなる必要があること（ユーザーやマーケットメイカーによるヘッジの容易さのため）と、セキュリティ上の理由（操作や攻撃を避けるため）を考慮し、**期限時の価格のオラクルソースとしてChainLinkのデータフィードを選択しました**。

ChainLinkの異なる取引所から価格情報を集約する分散型データソースを使用することで、私たちのスマートコントラクトの実行が最新で信頼性の高い、最も公正な価格データセットに基づいていることを保証します。

## 過去の終値から導出された計算価格

Rangeboundのような製品では、最終的な支払いを計算するために、発行開始から期限までの基礎トークンの最高価格と最低価格を知る必要があります。一般的なオンチェーンでは、オンチェーンオラクルが連続的な時系列データを提供しないため、このデータを提供することはできません。

自社のオラクル契約を（一般的な）中央集権的妥協として展開する代わりに、**ChainLinkのFunctions製品**に解決策を見出しました。最新の革新のおかげで、分散型の方法でオフチェーンAPIを呼び出し、得られたデータを通常のデータフィードのように分散型ノードを通じてオンチェーンに公開することができます。

![](../../static/KxYlbnS0IoEtX6xAxV1uB0WKsLg.png)

## 自動化定期更新サービス

SOFAはChainLink Automationを利用して、価格が定期的に自動更新され、ブロックチェーンにプッシュされることを保証します。ChainLink Automationは、スマートコントラクトが複雑なタスクをスケジュールし自動的に実行できる分散型ネットワークを提供し、間隔データの更新、トリガーイベント、さらには重要な契約の調整を含みます。これにより、**オンチェーンの価格が常に最新の状態に保たれ、SOFAの接続されたdAppネットワークにデータの信頼性を提供します。**

![](../../static/FESNbrjpEobC0DxtBz5u6Og0sgf.png)

## 分散化と追跡可能性

私たちのコアDeFi精神に忠実であり続けるために、**SOFAの価格データ取得プロセスは常に完全に分散化されており、契約レベルでの完全な監査追跡可能性を提供します。** 透明な処理を支持することで、システム内のすべてのステップがユーザーによってオープンに検証可能であり、価格データの詳細（提供者のソースや集約ロジックなど）が常に観察可能であることを保証します。

## Oracleサービスにおける継続的な革新

ChainLinkがDeFiデータの信頼性におけるゴールドスタンダードである一方で、SOFAはオラクルサービスにおける最新の革新を常に探求し、情報を得ています。私たちは限られたプロバイダーソースへの過度な依存を認識しており、**技術的に可能な限りプロトコル入力を多様化するよう努めます**。

長期的には、SOFAはユーザーの利益を守りつつ、運用の持続可能性を確保できる堅牢で透明性のある分散型データ取得システムを提供することを目指しています。