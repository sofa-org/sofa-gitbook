{"./":{"url":"./","title":"ðŸ’¡ SOFA.org Overview","keywords":"","body":" SOFA.org Overview SOFA.org is a decentralized, non-profit, open-source technology organization dedicated to building a trustless DeFi ecosystem that can handle the true atomic settlement of all financial assets on the blockchain, while supporting DeFi practitioners and stakeholders around the world. Some of the association's core mission goals include: Develop industry-wide standards and best practices for the DeFi community to bolster its continued growth and maturation. Support and facilitate the development of high-quality projects. Develop innovative Defi infrastructure to support ecosystem foundation. Nurture mainstream awareness and appreciation of DeFi to foster cooperative dialogue between industry and regulatory figures. SOFA.org will operate as a DAO, concentrating on three key areas in DeFi: Education and technology advancement Theoretical research and innovation Promoting industry standards and setting best practices As our inaugural contribution, SOFA.org will develop (and continue to develop) a series of standardized Decentralized Clearing Vaults (DCV) to form the foundation of our ambitious decentralized clearing solution: DCV-EXOTIC (Structured Product Clearing) DCV-LEVERAGE (Leverage Structured Product): coming soon DCV-WM (Dynamic Allocation Pool for DCV-EXOTIC): coming soon We cordially invite all passionate DeFi contributors and any organizations that are excited about the future of DeFi become a part of SOFA.org. Join us: contact@sofa.org Welcome everyone interested in DeFi to join our community. Reach out to us: Telegram Twitter Discord "},"01-features/":{"url":"01-features/","title":"ðŸŒˆ Innovating the Next Wave of DeFi","keywords":"","body":" Innovating the Next Wave of DeFi Counterparty Defaults Served a Stark Reminder to the Importance of Decentralisation 2022 provided a harsh reality check for crypto, with the demise of Genesis, Celsius, 3AC, and FTX shocking the very core of our ecosystem, and reminded us of the importance of decentralisation that many of us had forgotten in our pursuit of profits. Traditional finance went through a similar reckoning with the demise of Lehman, where a chain of (over-indebted) counterparty failures nearly brought down the global financial system. As a result, the post-GFC era legislated the use of centralized clearing houses and tri-party clearing arrangements, effectively segregating and concentrating asset custody risk into well-funded (and highly regulated) 3rd party entities. Regulators had deemed that it was safer and more efficient to manage collateral risks within focused points of contact, as well as preventing bad actor intermediaries from playing 'fast-and-loose' with balance sheet management. Fast forward to today, imagine if the world had a widely available technology solution that provided immutable data records, traceable transactions, definable parameters, operational transparency, and exceptional network security; surely a technology like that would provide the ideal solution for a global settlement depository, wouldn't it? Rekindling the 'Trustless' Spirit as the Core Value of Blockchain Decentralization. Transparency. Immutability. Exensibility. Authenticity. These are some of the common words most often uttered as the main advantages provided by blockchain. However, we feel that 'Trustless' offers the best personification of crypto's core values, as blockchain has enabled complete strangers to execute valid transactions without the reliance on arbitrary middleman or gated privileged groups. Furthermore, smart contract immutability allows one to place their absolute faith in code instead of the goodwill of your counterparty. As such, the foundation of trustlessness is built on the uncompromisable pillars of 1) contract immutability and 2) on-chain asset settlement. These core principles will be our driving force in developing a protocol that can truly be free from the confines of centralization. However, let's be clear that the decentralization spirit should be about promoting user access and participation, rather than absolving responsibility in some extreme form of financial anarchy. While blockchain executions could be anonymous, there is still usually a social human being at the other end of your transaction that we should treat with respect. The development of the DCV protocols is our attempt to promote the trustless decentralisation spirit, but it's equally important for us to establish a set of 'best practices' guidelines to uphold professional accountability, even if they are self-imposed or self-regulated. Every part of our protocol design, including contract transparency, vault classification, and fair-launch tokenomics demonstrate our resolve and commitment to building a more responsible DeFi. Through leading by example, we hope to show the world that there is a better way forward, with trustless decentralization being a key cornerstone of that future. Risk Tokenization At their core, financial instruments are ultimately nothing more than monetary contracts against a counterparty on some claims of payments and ownership. They are governed by various man-made (& centralised) layers of regulation, and legally memorialized by physical and electronic paperwork. Unsurprisingly, we can substitute a lot of the preceding words with \"digital\" and \"blockchain ledger\" without losing the essence of their meanings. Crypto has made tremendous progress in the area of on-chain safety, 'code is law' smart contract frameworks, transferrable digital currencies, and tokenization of RWAs. We are taking the last part one step further with our DCV protocols, where we are recording not just the notional amount, but also transcribing other vital instrument parameters on-chain, so that they can be authentically replicated and referenced upon in a process we call Risk Tokenization. The resulting output will be contained in something called 'Position Tokens', which can be thought of as ownership claims on chain-locked assets, but can be freely transferred between users like a standard ERC-20 tokens. A Sustainable Tokenomics Model with Usage Driven Rewards Look, money makes the world go-around, and the maximization of self-interest as a stable equilibrium outcome is a core driving force behind DeFi. However, in the past cycle, we have seen a number of (very) high profile failures of once promising projects due to poorly constructed tokenomics. Whether it's due to exit-liquidity dumps (by insiders & VCs), gimmicky inflationary experiments, price-reflexive demand models, or an over-focus on short-term gains, there is still a lot of work to do to promote a more sustainable monetary model. In response, SOFA.org will be deploying a 100% fair-launch tokenomics model, with a fixed-supply deflationary utility token that can only be earned via protocol usage. Furthermore, all protocol earnings will be used for daily token burn operations, ensuring that all profits are directly recycled back into the pockets of our core users and hodlers. Over the long-run, the token price shall be a fundamental representation of how much (settlement) value our protocols have contributed to the ecosystem. 'Trade to Earn', anyone? Decentralized Clearing Vaults (DCV) as a New Settlement Foundation With the wisdom gained from the past cycle, we are directly addressing some of the structural shortcomings in DeFi while iterating on its key innovations. Specifically, the creation of the Decentralized Clear Vaults (DCV) is our ambitious attempt to establish standards of how financial assets can be atomically settled on-chain, while simultaneously catalyzing DeFi capital liquidity through transferrable Position Tokens. By recording relevant instrument details directly on the smart contract, not only can we settle these assets on-chain, but the protocol can also mint matching Position Tokens as a definitive digital proof of claim. Furthermore, these Positions Token can be pledged to other DeFi protocols and even CeFi platforms as secure collateral, greatly enhancing capital velocity across the entire ecosystem. Finally, by having DCV vaults as a secure, transparent, and 'neutral' settlement option on the blockchain, we have eliminated asset custody concerns across crypto intermediaries, offering users complete ease of mind to focus on return ON capital rather than return OF capital. "},"02-protocols/":{"url":"02-protocols/","title":"ðŸš€ Protocol Premise & Vault Taxonomy","keywords":"","body":" Protocol Premise & Vault Taxonomy SOFA.org will be developing a series of standardized decentralized vaults based on the underlying asset class, as well as their use-case pertaining to settlement, lending, and dynamic asset allocation. Our core premise is to create the ability to transfer dormant, chain-locked assets into partnering DeFi and CeFi venues via the use of authentic Position Tokens. This creates a secure form of asset rehypothecation that will sustainably release significant liquidity across the entire crypto ecosystem. "},"02-protocols/01-dcv-exotic.html":{"url":"02-protocols/01-dcv-exotic.html","title":"DCV-Exotic (Structured Products & Clearing)","keywords":"","body":"DCV-Exotic (Structured Products & Clearing) What is a Structured Product? TradFi money legos In a nutshell, a Structured Product is a hybrid derivative that combines the features of multiple financial products into one. For example, it can combine certain features and protection of a bond, but carries an upside payoff conditional on certain market conditions. A typical TradFi structured note could link its return based on a basket of stock indices, such as the MSCI world equity index. Another structure could see the note pay a return based on the prevailing 5yr US treasury yield, but the note becomes immediately redeemable as soon as the 5yr yield breaches a certain cap. Main User Benefits of Structured Products Designing Your Own Payoffs The main benefit of structured products is the tailored payoff profiles they offer to investors, and often designed with some form of downside protection in mind. Bespoke Payoffs: A structured note can be designed to offer investors a conditional payoff structure that they would not have access to otherwise. Said in another way, issuers are combining different instrument classes to create a payroll scenario that is more suitable to the investor's risk preference. Simple Operations: Instead of managing a portfolio of option and directional risks to obtain a desired payout, structured products help to wrap this complexity within the confines of a single note, making things much simpler for the investor. Design Flexibility: An endless array of customization options are available based on expiration, strike price, underlying asset, and payoff structure, catering specifically to the risk preferences of the investor. For instance, principal-protected structured products are particularly suitable for more conservative investors who are looking for yield enhancement over fixed deposits. In another example, investors with a 'range-bound' view of the markets can enjoy high interest yield from investing in products such as DNT (Double No Touch), which serve the highest payouts when prices stay within well contained 'barriers'. Monetizing Crypto Volatility: At its core, structured products are utilizing embedded options to generate extra returns, therefore payouts are directly affected by volatility pricing. With crypto assets typically having higher implied volatilites compared to conventional markets, crypto structured products tend to offer higher yields vs their TradiFi counterparts. With an increasing focus on token staking and yield generation, we expect structured products to play an increasingly significant role across the entire crypto ecosystem. Example Progression of Structured Product Face Value from Inception to Maturity The On-Chain Structured Product Opportunity Shifting the freedom of choice back to the end-user Like everything else in TradFi, having access to Structured Products requires going through a whole labyrinth of gated middlemen and service providers who are more interested in monetizing your net-worth than growing your investments. Furthermore, by virtue of being a customized product, executions are conducted in an OTC (over-the-counter) manner, with your preferred Wall Street middleman quoting you a price based on a minimum notional, while ensuring that the embedded product margin is enough to fund their lavish year-end bonuses. Pricing transparency is nil, and price competition is non-existent as well unless you are a Family Office whale with multiple private bank coverage. In short, you are asking for the permission of financial institutions to sell you a note at the price they want. No wonder structured products remain a permanent mainstay of banking profitability. Inspired by Erik Voorhees, the DCV-Exotic vaults will eliminate all the unnecessary middleman fluff via the creation of a transparent on-chain workflow that presents a fair and utilitarian price discovery process for both users and market makers. We envision this to be the start of a series of protocols that will return product access, pricing transparency, freedom of choice, and competitive fairness from the grip of financial institutions back to the end investor. TradFi Market Size US markets have seen an annual issuance of around US$70-90bln of traditional structured products over the past few years. For the most part, they are packaged investment products offered by Wall Street banks, typically structured as downside protection notes with upside yield benefits via the use of embedded options. Structured Products Issuance in Traditional Financial Markets Source: SRP, WSJ Interestingly, while the outstanding notionals of structured products are low compared to their vanilla peers, their profitability punch well above their weight, contributing more than half of total revenues toward the top global banks' equity derivatives business, making them a high-focus area for business executives. The Structured Products Business Offers Some of Most Profitable Revenue Streams for Investment Banks Source: IFR Crypto Market Size Over in crypto, industry research suggests that on-chain structured products constitute just US$2.5 bln of TVL, versus a DeFI market cap of US$50 bln (5%), and US$1 trln for the entire crypto marketcap. On the CeFi side, offshore CEX are estimated to control around US$100bln of assets (source: Defillama), so a simple extrapolation would estimate aronund US$7-10bln of outstanding structured products across both on- and off-chain venues. Source: Index Coop Blockchain Support The DCV-Exotic protocol will be launched on Ethereum and other L1 EVM blockchains to start. Protocol Workflow A high-level run-down of a typical trade execution via DCV-Exotic is as follows: Participating institutional market makers continuously stream executable prices on structured products to the protocol's dApp User selects and executes a particular structured product purchase based on the price shown User's committed assets are sent and locked in the product's DCV-Exotic The market maker's collateral is also sent and locked into DCV-Exotic Note: the transaction will not execute if either side fails to post their required assets at this point Corresponding Position Tokens claims (referencing asset details) will be minted to both the user and market maker, freely transferrable like any conventional ERC-20 token to any other wallet destination For Principal-Protected structures only, the collateral in the vault would be staked into mature and safe yield earn protocols like Compound, AAVE and etc. to earn a base level of interest for users Extra careful scrutiny will be placed on this step, with eligible destinations voted on by the Governance Token holders Finally, upon product expiry, the relevant payout will be released and claimable in the vault by both the user and the market maker Should the respective Position Tokens be transferred to a new wallet, the owner of the address will instead be able to claim the asset at anytime post-expiry Token Standards (ERC-1155) All of SOFA.org's protocols will tokenize chain-locked positions via the ERC-1155 multi-token standard, recording vital position details such as [Expiry], [Anchor Prices], [Maker/Taker Toggle] etc in the case of DCV-Exotic. ERC-1155 allows the creation and management of multiple types of tokens within a single contract, with support for each type of token having different properties. Positions with the same parameters can still be merged or split, while enabling transfers as conveniently as standard ERC-20 tokens. This innovation strikes a balance between wide asset compatibility, high flexibility, and gas efficiency. Vault Classification The Vault contract uses the ERC-1155 standard to support fungibility of Position Tokens with the same strike price and expiry time. DCV-Exotic is designed with the flexibility to support any structured product type and collateral denomination, though a distinction will be made on whether the underlying product contains a 'principal protection' feature or not. Additional Technical Details DCH-Exotic Details Immediate Position Token Use-Cases Unlocking on-chain asset mobility across both DeFi and CeFi The ability to revive dormant, chain-locked assets into an ownership transfer using Position Tokens (ie. rehypothecation) will unlock significant liquidity flow into the DeFi ecosystem. Secondary Trading of Position Tokens Position Tokens can be transferred (like any ERC-20 tokens) by users into supporting DEX / DeFi Protocols to act as recognized trading margin and collateral (with a risk haircut). By pledging the Position Tokens, the protocol is now the rightful owner of the locked assets in the vault, and can retrieve (and liquidate) them at anytime post instrument expiry. In return, the user gains liquidity access to locked funds to deploy in new trading opportunities as desired. Collateral on Centralized Exchanges As the bridge between DeFi and CeFi continues to evolve, there are interesting use cases where Position Tokens can be deposited and accepted by supporting centralized exchanges as trading margin collateral. Furthermore, exchanges can also take advantage of using blockchain vaults as a clearing protocol to establish a more robust 'tri-party' settlement framework. Users will ultimately get the best of both worlds with the execution liquidity & fluidity from a CEX, while enjoying the custody safety of a blockchain vault. Fully Collateralized DeFi Lending Besides on-chain trading, tokenized positions can be safely deployed in collateralized lending protocols. Users can pledge their Position Tokens as collateral to swap into lending pools from other cryptocurrencies or stablecoins, thereby greatly enhancing the churn and collateral mobility between various DeFi pools. Additional Use-Cases The examples above are just a tiny subset of scenarios that can take advantage of position tokenization. While we are going to confirm our proof-of-concept initially via structured products, the underlying concepts extend to the entire gamut of investment products, each with their own respective parameters that can co-exist at the same time. In fact, position tokens of matching parameters can be aggregated together as a 'product type', offering the same flexibility in frictionless transfer and asset management as a conventional ERC-20 token. By tokenizing positions with the ERC-1155 standard, SOFA.org is looking to create a benchmark standard for risk tokenization that ensures the uniqueness of each investment product while minimizing smart contract complexity. The design vision provides secure, accurate position representation while maximizing use-case extensibility into other DeFi protocols. We see this as the initial key building blocks towards a true decentralized clearing system, and are excited to continuously improve and iterate further improvements towards our ultimate goal. Summary of DCV-Exotic Benefits Setting a new paradigm for crypto settlement & blockchain clearing SOFA.org is looking to provide an infrastructure blueprint towards decentralized clearing and elimination of crypto counterparty risks Allows users to make structured product investments strictly based on payoff and pricing benefits, while off-loading asset custody concerns to onc Recording of all vital instrument data on-chain in a fully transparent manner Supports a wide gamut of instrument parameters and product structures Tokenized positions unlocks capital efficiency as a form of secure collateral rehypothecation Fully composable into other DEX, DeFi lending protocols, with additional compatibility with even centralized platforms via tokenized positions Innovative use of ERC-1155 and Permit2 smart contract standards to provide product flexibility with reduced gas costs Deflationary, user-aligned, and long-term sustainable tokenomics design Available Structured Products on DCV-Exotic at Launch As our inaugural proof-of-concept, we will initially focus on three popular product structures called Double No Touch ('DNT'), Smart Trend and Shark Fin. All of these products are available in either 'Principal-Protected' or 'All-or-None' forms. Moreover, additional product types will be continually added based on user demand and ecosystem feedback. Double No Touch (DNT) Product Overview Double No Touch products are a type of structured product based on price boundaries. Investors can profit if the underlying asset does not touch the preset barriers during the investment period. These products are suitable for investors who expect the market to stay in a sideways consolidation phase with subdued volatility. Referring to the payoff diagram below, an investor believes that BTC will be stuck between a range as defined by the lower and upper barriers, but does not want to incur much downside even if the view proves to be wrong. The DNT product will guarantee the investor a minimum base yield of (A) even if the price of BTC breaks out from either side, but the investor will be entitled to an extra profit return equivalent to (A+B) should prices stay contained within the barriers. For customization options, the investor is free to adjust the width of the price range, which would incur a different profile of base and upside profits depending on the levels chosen. Naturally, specifying a tighter price range represents a more aggressive bet on low volatility, which would lead to higher upside returns. Conversely, a wider price range would lower excess profits in return a higher probability of winning. Finally, for ease of management, the product can specified to be automatically re-invested upon maturity as a continuation bet. Smart Trend Product Overview The Smart Trend product is suitable for investors who expect that the market will soon undergo a smooth and steady trend, but still desires some downside protection. By defining both a lower and upper price barrier, investors will start accruing income gains as soon as the underlying instrument crosses the initial price threshold, with increasing payouts until we hit a maximum at the 2nd boundary. Moreover, unlike the DNT product, Smart Trend only observes at the time of settlement whether the price of the underlying asset falls within the set range to determine the final profit (ie. European option). This product is available via both Bullish and Bearish expressions. As an example, if an investor is bullish on BTC and predicts that in the next seven days, the price of BTC will remain above $70,000 but will not exceed $73,000, they can choose to buy a bullish Smart Trend product, setting $70,000 as the lower limit and $73,000 as the upper limit of the profit range. Referring to the diagram below, at the time of settlement, the investor will be eligible for a payout between base profit of (A) to and upper limit of (A+B), depending on what the price of BTC is at the time. Applicable Scenarios The product might be suitable for investors who believe that an asset will see a strong reaction to a specific economic event, but is also concerned about the risk of a price decline should they be wrong in their market prognosis. For example, the investor might desire to speculate on BTC prices on the next FOMC decision, the having event, or the next ETF approval announcement. This strategy is appropriate for investors holding a strong market conviction into these important but risky events, and wants to remain disciplined in managing downside losses should his/her view turn out to be wrong. Shark Fin Product Overview Compared to DNT and Smart Trend, the 'Shark Fin' product is relatively more well-known in TradFi markets thanks to its memorable moniker. Its design and payoff are similar to Smart Trend (ie. European option), with the main exception being that the investor is speculating much more aggressively on prices being within a particular range. Said in another way, the Shark Fin product adopts a more conservative view on market volatility by sacrificing more upside on a large market move, in return for more aggressive profits within the lower price boundaries. As example, let's say an investor is bullish on BTC, but holds a high conviction that it will not breach a certain upper bound at some strong technical resistance level. In such a scenario, the investor can choose to buy a Bullish Shark Fin product with a payoff profile as per the diagram below. At product settlement, the investor will receive a return ranging from (A) to (A+B) depending on where spot BTC is; however, unlike in Smart Trend, note that the return drops to (A+C) upon a breach of the upper price barrier, offering a trade-off in exchange for more aggressive profits in the preceding range. Defining Your Risk Preference Principal-Protected Principal protection features are designed for risk-averse investors looking for a guaranteed return of their principal. Principal protected vaults will invest users' deposited principal in safe-yielding protocols (eg. AAVE) to generate a base level of interest, and utilize a portion of that guaranteed income to fund option premium with market makers for upside potential. The end result will ensure a full principal return at the downside, with some upside potential should the market move favourably in the user's direction. With that being said, please note that a critical design component requires the passive yields offered by the eligible staking protocols to be meaningfully above the product's worst-case payout, in order to properly fund the option premium to generate the upside return. As such, should the user be holding ETH instead of USDT, he/she will need to convert the ETH into stETH in a liquid staking protocol such as Lido, before locking the stETH into the sofa protocol vaults to benefit from the extra yield accretion. All-or-None For investors with a greater risk-reward tolerance, the protocol also offers higher-return structures with risks of complete capital losses. These aggressive products are only intended for risk-loving investors (fellow degens) who are desirious of substantially high returns in exchange for capital losses. With these All-or-None products, the protocol vault will lock in both the investors' principal as well as the market makers' collateral at trade inception, analogous to a 'poker-ante' of sorts. The locked principal positions will not be restaked to any other protocols, and it serves as the capital-at-risk against the product payoff. Let's use the All-or-None DNT product as an example. Should the price of the underlying asset remain strictly within the barriers by final maturity, the investor will receive multiples of higher return than he would have under the Principal-Protected version. However, should the opposite happen, the investment will be early-terminated, with the entire locked principal being transferred to the market maker as the 'winner' of this strategy. Once again, these products are intended for investors holding a very strong market conviction, and would like to put that confidence to test in hopes of earning a very high rate of return in exchange for principal losses. "},"02-protocols/01-dcv-exotic/":{"url":"02-protocols/01-dcv-exotic/","title":"DCV-Exotic Details","keywords":"","body":"Executive Summary SOFA.org is a decentralized, non-profit, open-source technology organization that is building a trustless DeFi ecosystem that can handle true atomic settlement of all financial assets on the blockchain. Vital instrument parameters will be immutably stored at the smart contract level, allowing the creation of authentic tokenized risk positions, representing secure and transferrable collateral claims that are recognized on supporting DeFi and CeFi platforms. Most critically, counterparty risks are effectively removed and transferred to blockchain vaults as a decentralized 3rd party custodian, allowing users and intermediaries to conduct transactions without having to worry about asset safety. Furthermore, capital inefficiency problems in DeFi are significantly improved through the presence of transferrable Position Tokens, enabling a rehypothecable 'repo-like' market with secure 1:1 claims. Initial dApp use-cases will revolve around Structured Products, with strong ecosystem support from some of the industry's most reputable market makers, CeFi exchanges, and DeFi protocols. Platform users are directly rewarded through the native utility token $RCH, a fixed supply deflationary token which can only be earned via protocol usage. Furthermore, all protocol earnings will be recycled to burn $RCH tokens daily, decreasing net supply steadily and accruing value gains directly to our user holders. Given its fixed and known supply release, long term price accretion on RCH should be a direct reflection of SOFA's accumulated usage, aligning price gains with usage metrics rather than inflationary gimmicks. The SOFA ecosystem is designed to be fully extensible with other DeFi protocols and even centralized platforms, offering boundless partnership synergies with lending partners, trading exchanges, stablecoin entities, and product issuers. "},"02-protocols/01-dcv-exotic/01-design/":{"url":"02-protocols/01-dcv-exotic/01-design/","title":"Technical Design","keywords":"","body":"Technical Design Blockchain Support The DCV-Exotic protocol will be launched on Ethereum and other L1 EVM blockchains to start. Position Tokens with the same Strike Price and Expiry Time are fungible like any standard token, and can be batch settled in a single operation to allow significant gas savings. "},"02-protocols/01-dcv-exotic/01-design/01-vaults.html":{"url":"02-protocols/01-dcv-exotic/01-design/01-vaults.html","title":"Vault Classification","keywords":"","body":"Vault Classification The DCV-Exotic protocol is designed with the flexibility to support any structured product type and collateral denomination, though a distinction will be made on whether the underlying product contains a 'principal protection' feature or not. As such, our Vault designs are split into 2 major, self-explanatory categories called 'Principal Protected' and 'All-or-None'. Example Vault Taxonomy at DCV-Exotic Launch "},"02-protocols/01-dcv-exotic/01-design/02-oracles.html":{"url":"02-protocols/01-dcv-exotic/01-design/02-oracles.html","title":"Oracle Construction","keywords":"","body":"Oracle Construction In the world of cryptocurrencies and DeFi, obtaining off-chain data in a timely and accurate manner is crucial. As smart contracts cannot directly access external systems or data sources, oracles serve to bridge this gap by bringing outside information onto the blockchain. The trustworthy data service must be provided to ensure full settlement transparency and traceability in settlement, while minimizing possible disputes. The ChainLink oracle service, known for its high degree of decentralization, reliability, and adaptability, has been chosen as SOFA's primary means of accessing off-chain data. Furthermore, the use of ChainLink price feeds has the additional benefit of protecting the protocol against 'flash loan attacks', while the source of data feeds will be from reputable trading platforms such as Coinbase to ensure sanctity of data. Spot Price / Price at Expiry Obtaining the current price of an underlying asset on-chain through an oracle is typically done in one of two ways: calling contracts from DEXs like Uniswap to get the Price or TWAP Price of the underlying asset obtaining the asset price through data feeds provided by an oracle service like ChainLink Considering the need for the Settlement Price to be as close as possible to CeFi exchange prices (for ease of hedging by users or market makers) and for security reasons (to avoid manipulation and attacks), we have chosen ChainLink's Data Feeds as the oracle source for our Price at Expiry. With ChainLink's decentralized data sources that aggregate pricing information from different exchanges, we ensure that our smart contract executions are based on up-to-date, reliable, and fairest sets of pricing data publicly available. Calculated Price Derived from Historical Closes For products like DNT, it is necessary to know the highest and lowest prices of the underlying token from mint inception to expiry in order to calculate the final payout. Common on-chain typically cannot provide this data, given that on-chain oracles do not provide continuous time-series data. Instead of deploying our own oracle contracts as a (common) centralization compromise, we have found a solution in ChainLink's Functions product. Thanks to the latest innovations, we are able to call off-chain APIs in a decentralized manner, and publish the obtained data on-chain through decentralized nodes like a typical data feed. Automation Regular Update Service SOFA utilizes ChainLink Automation to guarantee that prices are automatically updated and pushed to the blockchain on a regular basis. ChainLink Automation offers a decentralized network where smart contracts can schedule and automatically execute complex tasks, including interval data updates, trigger events, and even critical contract adjustments. This ensures that on-chain prices remain constantly up to date, and offers data confidence to SOFA's network of connected dApps. Decentralization and Traceability Staying true to our core DeFi spirit, SOFA's price data retrieval process will always be fully decentralized, offering full audit traceability at the contract level. Our advocacy for transparent processing ensures that every step within the system is openly verifiable by users, with pricing data details such as provider source and aggregation logic fully observable at all times. Continuous Innovation in Oracle Services While ChainLink remains a gold standard for DeFi data reliability, SOFA is continuously exploring and staying informed of the latest innovations in oracle services. We are cognizant of over-reliance on limited provider sources and will strive to diversify our protocol inputs as much as technologically possible. In the long-run, SOFA strives to offer users a robust, transparent, decentralized, and sustainable data acquisition system that can safeguard user interests while ensuring operational longevity. "},"02-protocols/01-dcv-exotic/01-design/03-settlement.html":{"url":"02-protocols/01-dcv-exotic/01-design/03-settlement.html","title":"On-Chain Settlement Considerations","keywords":"","body":"On-Chain Settlement Considerations Settlement Logistics Job-scheduling challenges in the world of DeFi With trivial for conventional systems, time-scheduled data retrievals are challenging for blockchain, as smart contracts do not have a native 'Cron-like' job scheduler. How can we design an automated mechanism to ensure that prices are scheduled and updated on time in crypto? Crypto 'algo-stables' such as Basis Cash or ESD once swept through the DeFi sector, deploying an 'epoch' interval approach which required a manual trigger to advance operations at the end of each epoch and establish a new settlement price. Reward mechanisms were built-in to smart contract code to compel volunteers to 'trigger the advance' and keep the protocols in smooth operation. Similarly, a popular project called Keep3r founded by Andre Cronje (Yearn Finance, Fantom) created a virtual job board where one would post advance requests and specified job awards for this very specific purpose. Neither solution was far from perfect as they ultimately relied on human intervention (motivated self-interests), not to mention uncertainties over the actual final execution time, given the manual efforts required. This can lead to uncomfortable situations where the settlement fixing isn't updated until well after the expiry, leading to a less than satisfactory user-experience. Could we create and rely on off-chain solutions that call for a periodic triggering of price updates? While possible, we remain disinterested in centralized 'shortcuts' where the protocol could be critically impaired by risks such as a server failure. As covered in our oracle section, SOFA utilizes ChainLink's Automation service as our settlement pricing source. Their service enables conditional execution of smart contract functions through a reliable and decentralized automation platform with a proven network of external node operations, currently securing over billions in TVL. Finally, with the final settlement price in place, users and market makers can call the contract to burn their Position Token at anytime and receive their due payment, which calculations seamlessly handled by the smart contract with reliable data feeds from SOFA's decentralized oracles. Payoff Calculations The contract for calculating product payoffs is completely standardized, and is Vault-independent and collateral agnostic. Instead, calculation contracts are defined by the underlying type of structured product to calculate the model payouts. Some payoff examples are listed below: Double No Touch Payoffmaker={X,HighSettlePriceâ‰¥HighStrikePriceâˆ¨LowSettlePriceâ‰¤LowStrikePrice0,HighSettlePriceHisghStrikePriceâˆ§LowSettlePrice>LowStrikePricePayoff{maker}=\\begin{cases}X, HighSettlePrice\\geq HighStrikePrice\\vee LowSettlePrice\\leq LowStrikePrice\\\\ 0, HighSettlePriceLowStrikePrice\\end{cases}Payoffmaker={â€‹X,HighSettlePriceâ‰¥HighStrikePriceâˆ¨LowSettlePriceâ‰¤LowStrikePriceâ€‹0,HighSettlePriceHisghStrikePriceâˆ§LowSettlePrice>LowStrikePriceâ€‹â€‹ Payoffuser=Xâˆ’PayoffmakerPayoff {user}=X - Payoff {maker}Payoffuser=Xâˆ’Payoffmaker Smart Trend Smart Bull Payoffmaker={0,SettlePriceâ‰¥HighStrikePriceXÃ—HighStrikePriceâˆ’SettlePriceHighStrikePriceâˆ’LowStrikePrice,LowStrikePriceSettlePriceHighStrikePriceX,SettlePriceâ‰¤LowStrikePricePayoff{maker}=\\begin{cases}0, SettlePrice\\geq HighStrikePrice\\\\ X\\times\\frac{HighStrikePrice-SettlePrice}{HighStrikePrice-LowStrikePrice},LowStrikePricePayoffmaker=â€‹âŽ©â€‹âŽªâ€‹âŽ¨â€‹âŽªâ€‹âŽ§â€‹â€‹â€‹0,SettlePriceâ‰¥HighStrikePriceâ€‹XÃ—â€‹HighStrikePriceâˆ’LowStrikePriceâ€‹â€‹HighStrikePriceâˆ’SettlePriceâ€‹â€‹,LowStrikePriceSettlePriceHighStrikePriceâ€‹X,SettlePriceâ‰¤LowStrikePriceâ€‹â€‹ Payoffuser=Xâˆ’PayoffmakerPayoff {user}=X - Payoff {maker}Payoffuser=Xâˆ’Payoffmaker Smart Bear Payoffmaker={X,SettlePriceâ‰¥HighStrikePriceXÃ—SettlePriceâˆ’LowStrikePriceHighStrikePriceâˆ’LowStrikePrice,LowStrikePriceSettlePriceHighStrikePrice0,SettlePriceâ‰¤LowStrikePricePayoff{maker}=\\begin{cases}X, SettlePrice\\geq HighStrikePrice\\\\ X\\times\\frac{SettlePrice-LowStrikePrice}{HighStrikePrice-LowStrikePrice},LowStrikePricePayoffmaker=â€‹âŽ©â€‹âŽªâ€‹âŽ¨â€‹âŽªâ€‹âŽ§â€‹â€‹â€‹X,SettlePriceâ‰¥HighStrikePriceâ€‹XÃ—â€‹HighStrikePriceâˆ’LowStrikePriceâ€‹â€‹SettlePriceâˆ’LowStrikePriceâ€‹â€‹,LowStrikePriceSettlePriceHighStrikePriceâ€‹0,SettlePriceâ‰¤LowStrikePriceâ€‹â€‹ Payoffuser=Xâˆ’PayoffmakerPayoff {user}=X - Payoff {maker}Payoffuser=Xâˆ’Payoffmaker "},"02-protocols/01-dcv-exotic/01-design/04-fees.html":{"url":"02-protocols/01-dcv-exotic/01-design/04-fees.html","title":"Protocol Fees","keywords":"","body":"Protocol Fees At SOFA.org, we are committed to creating a fair and transparent financial ecosystem where users can democratically invest in a wide gamut of structured products with transparent and fair pricing from market makers. Furthermore, as a fully decentralized project, we want to ensure that any protocol gains are primarily shared with our underlying users, ensuring full incentive alignment rather than privileged payouts to special interest groups. As such, we have devised a series of fee structures with 'fair-launch' tokenomics to ensure proper value-accrual and support long-term platform longevity. There will be no VC joy-riding or exit-liquidity dumps within SOFA.org. Protocol Revenue SOFA will collect 15% of the user's option premium as a base trading fee. Furthermore, in the event of a 'winning' payout occurring for the user, a further 15% settlement fee will be charged against the total gross notional exposure. Example: User purchases 10,000 USDT worth of Structured Products, maturing in 14 days at a price of 100 Product pays out [Principal + 2% interest] as a worst case downside scenario AAVE APY = 10% Excess Interest = [10% - 2%] = 8% APY User Option Premium = 10,000 8% (14/365) days = 30.68 USDT Market Maker Premium = 100 USDT Base Trading Fee = 30.68USDT * 15% = 4.602USDT Settlement Fee = (30.68USDT + 100USDT) * 15% = 19.6USDT (only in the event of a winning payout) Total Protocol Revenue = 4.602USDT + 19.6 USDT = 24.202USDT Native Token ($RCH) Buyback Aligning protocol success with Token performance At SOFA, we believe that the most straight-forward way to align user and hodler incentives are through token buybacks, with $RCH being our native utility token. We will commit all protocol income to be exclusively used for $RCH buybacks, creating a virtuous loop of token price gains being driven off protocol usage. With a fixed deflationary supply, methodical release schedule, and usage-driven airdops, the long-term value accretion for $RCH is largely a function of protocol revenue, which in itself is a direct measure of adoption success. Furthermore, with Token airdrops exclusively limited to protocol users and supporters, we can ensure that they stand best to benefit from SOFA's long-term success, staying true to DeFi's commerical ideals of 'giving back' to true core users and early adopters. The token buyback logic is an integral part of the SOFA protocol smart contract. Protocol administrators will regularly trigger this process to purchase and burn $RCH with protocol revenue through supported DEX venues. Destroyed $RCH will be no longer enter circulation, and the total amount of $RCH will gradually decrease over time on rising protocol usage. More details of our Tokenomics model will be covered in its own dedicated section below. "},"02-protocols/01-dcv-exotic/01-design/05-referral.html":{"url":"02-protocols/01-dcv-exotic/01-design/05-referral.html","title":"Referral Model","keywords":"","body":"Referral Model Strength in numbers At SOFA, we recognize the importance of having a vibrant network of DeFi community members and partners to promote and ensure the long-term success of the protocol. As such, we have designed a referral reward mechanism aimed at growing both our individual and institutional partnerships for the SOFA ecosystem. Operational Process When users purchase products and mint positions through the SOFA protocol, they can pass the referrer's wallet address as a parameter during contract interaction. In addition to facilitating ease of operations, this design promotes full transparency in referral rewards along with public recognition. Reward Calculation Referral rewards are calculated as a %-payout based on the notional value of the positions minted by the end-user. The protocol automatically tracks these parameters and will airdrop corresponding $RCH tokens to the referrer's address post transaction execution. Specific reward ratios and calculation methods will be publicly announced by SOFA, and will be subject to adjustments based on the platform's on-going governance decisions. Similar to the usage-based airdrops, the implementation of this referral mechanism is done to incentivize true ecosystem users and supporters to continually expand the platform's user base. The core focus remains to create a sustainable feedback loop that ensures a long-term win-win for all participants. SOFA** views the referral reward system as a long-term investment and market development strategy**. We are grateful and look forward to the involvement of our partnership friends and participants, and we will reciprocate by committing to provide full support and rewards to our valued ecosystem partners. "},"02-protocols/01-dcv-exotic/01-design/06-governance.html":{"url":"02-protocols/01-dcv-exotic/01-design/06-governance.html","title":"Decentralized Governance Framework","keywords":"","body":"Decentralized Governance Framework SOFA.org recognizes the value of decentralized governance within the DeFi ecosystem, and our governance framework empowers our Governance Token holders ($SOFA) with certain decision-making power to steer the protocol's direction. Furthermore, through the prudent use of multisig wallets, timelock contracts, and reputable voting platforms (Snapshot.org), we strive to ensure that our governance process is transparent, secure, and inclusive. Core Mechanisms Multisig Wallets: Multiple approvals are required from designated community members or stakeholders before transaction executions can occur. This ensures that decisions are made collectively rather than by a single entity, thereby bolstering governance robustness. Timelock Contracts: Timelock contracts add a delay between the initiation of a proposal and its execution. This delay provides a window during which the community can review and react to proposed changes, adding another layer of security and governance transparency. Snapshot.org: Snapshot is a decentralized voting platform that allows governance token holders to vote on proposals without incurring gas fees. It facilitates community engagement and decision-making by providing a user-friendly interface to carry out governance proposals. $SOFA Token: The $SOFA token is at the core of the SOFA governance system. This governance token serves as a right for community members to participate in the voting and decision-making processes of proposed initiatives. The combination of these tools serves to ensure that SOFA's governance model is operated under a democratic and community consensus. The overriding governance guidelines will be to promote the long-term success and interest alignment of protocol users and stakeholders through token ownership. "},"02-protocols/01-dcv-exotic/02-developers/01-marketmaker-open-apis.html":{"url":"02-protocols/01-dcv-exotic/02-developers/01-marketmaker-open-apis.html","title":"Open APIs for Market Maker","keywords":"","body":"Open APIs for Market Maker Specification Prefix To ensure transaction security, use HTTPS for transmission. JSON is the data interchange format. UTF-8 character encoding is universally applied. Interface signing algorithm utilizes HMAC-SHA256. UNIX millisecond timestamp is used, representing the number of milliseconds since January 1, 1970, 0:00:00. Parameters Request name type remark H-Request-Id string [Header]Request ID, unique H-Api-Key string [Header]API Key H-Timestamp long [Header]Valid timestampï¼Œe.g., 1672387200000 H-Nonce string [Header]Random string Authorization string [Header]Signatureï¼Œe.g.,ï¼šrfq-hmac-sha256 signature Rsponse name type ramark code integer [Body]Error code message string [Body]Error reason value T [Body]Result Signature Generation Our RFQ platform requires partner signatures to approve requests, followed by a verification procedure. A verification failure will lead to a platform rejection with a 401 Unauthorized response. Building the signature string: The signature string consists of five lines, each representing a parameter. Each line ends with a semicolon, including the last line. The valid timestamp and the request nonce are taken from the H-Timestamp and H-Nonce parameters in the header, respectively. Timestamp;NonceStr;HTTP_METHOD();URI();RequestBody; Populating the signature Use the SecretKey to encrypt StringToSign using HMAC-SHA256. StringToSign = Timestamp + \";\" + NonceStr + \";\" + UPPERCASE(HTTP_METHOD()) + \";\" + URI() + \";\" + RequestBody + \";\"; Signature = BASE64_STRING( HMAC-SHA256( BASE64_DECODE(SecretKey), StringToSign ) ); Setting HTTP Headers The request transmits the signature through the HTTP Authorization header. The Authorization header comprises of two parts: authentication type and signature information. Authorization: AuthenticationType SignatureInformation 1. Authentication Type: rfq `-hmac-sha256` 2. Signature Information: `Signature` Authorization: rfq-hmac-sha256 Signature Note: The request method should be in UPPERCASE. The RequestBody used for the signature must match the content of the request's body. For GET and DELETE requests, the URI should include the request parameters (e.g., /api/v1/result?orderId=123). If there is no request body (common for GET requests), the request body should be an empty string (\"\"). The valid timestamp (H-Timestamp) is determined by the requester; requests extending beyond the valid timestamp will be rejected by the RFQ server. RFQ Provide DNT RFQ Quote GET rfq/dnt/quote Parameters name required type description vault true string Vault address chainId true int Chain ID expiry true long Expiry time in seconds timestampï¼Œe.g., 1672387200 lowerBarrier true number Lower barrier upperBarrier true number Upper barrier depositAmount true number Deposit premiumAmount true number Premium protectedFundingAmount false number Protected interestï¼ˆnull when RISKYï¼‰ deadline true long Quote deadlineï¼Œe.g., 1672387200 takerWallet false string Taker wallet address anchorPricesDecimal true long makerCollateralDecimal true long collateralAtRiskPercentageDecimal true long totalCollateralDecimal true long underlyingPair true string Underlying Pair, e.g. BTC-USDT trackingSource true string Data sources are used to track the underlying value, e.g. DERIBIT depositCoin true string Currency / Coin of the premium paid to subscribe DNT riskType true string Typeï¼šPROTECTED, RISKY Response name type description timestamp long Quote timestamp vault string chainId int expiry long Expiry timestampï¼Œe.g., 1672387200 anchorPrices list[string] 20000000000,30000000000 makerCollateral string totalCollateral string collateralAtRiskPercentage string E18 deadline long Quote deadline timestamp makerWallet string signature string Note: totalCollateral * collateralAtRiskPercentage - makerCollateral == premiumAmount totalCollateral - makerCollateral == depositAmount Examples Request URL rfq/dnt/quote Parameters { **\"rfqId\"**:**1233992,** **\"apy\"**:**0.25,** **\"tenor\"**:**7.9,** **\"fundingAmount\"**:**0.01,** **\"depositAmount\"**:**1,** **\"premiumCoin\"**:**\"BTC\"**, **\"premiumAmount\":0.05,** **\"bookingQuantity\":1,** **\"totalAmount\":0.05,** **\"payoff\":1,** **\"deadline\":1672279892000,** **\"signature\":\"dsdkksdsksdk\"** } Appendix Code Message 1000 system error. 2001 sign error. 2002 param error. 3001 Requested information does not exist. 3002 Deposit amount is outside depositRange. 3003 Maximum subscriptions limit is reached. 3004 Subscription failed due to too much difference in premiumAmount. 3005 Quote failed. 3006 Temporarily do not provide service. 3007 Api rate limit exceeded. Try slow down. 3100 Order creation failed. Required Functionsï¼š premiumAmount = totalCollateral * dntCollateralRatio - makerCollateral depositAmount = totalCollater - makerCollateral bookingQuantity = totalCollateral * dntCollateralRatio projectedFundingAmount = projectedFundingAPY * (expDateTime - refDateTime) / 365 Tenor = (expDateTime - refDateTime) / 365 APY-In-Range = (projectedFundingAmount - premiumAmount + bookingQuantity) / tenor = makerCollateral / tenor APY-Protected = (projectedFundingAmount - premiumAmount) / tenor "},"02-protocols/01-dcv-exotic/02-developers/02-dapp-open-apis.html":{"url":"02-protocols/01-dcv-exotic/02-developers/02-dapp-open-apis.html","title":"Open APIs for DAPP Developer","keywords":"","body":"Open APIs for DAPP Developer We offer a 'contract product pricing feature' for the protocol, which involves soliciting quotes from MarketMakers and then returning the best pricing results back to SOFA. Users will subsequently have a choice to execute or reject the trade. Given the need to interface with different MarketMakers depending on the underlying contract, products will distinguished by contract type. Recommended DNT RFQ Inquiry Description Supports a list of RFQs composed of the same vault+chainId. POST /rfq/dnt/recommended-quote Input parameters Field Name Required Type Description list array[object] vault true string Contract information chainId true int Chain ID expiry true long Second-level timestamp for the expiry date, e.g., 1672387200 lowerBarrier true number Lower price upperBarrier true number Upper price depositAmount true number RFQ purchase amount inputApyDefinition true string The underlying code is Enum indicating how the input APY is calculatedOptimusDefaultAPY, BinanceDntAPY, AaveLendingAPY protectedApy false number Guaranteed annual yield (empty for RISKY, required for protected) fundingApy false number AAVE annual yield (empty for RISKY, required for protected) Input Parameter Example { \"list\":[ { \"vault\":\"0x0E3a24ed24fBfF5406C8529fBe3Cc4DFE12b1cDB\", \"chainId\":80001, \"lowerBarrier\":2775, \"upperBarrier\":2825, \"expiry\":1708416000, \"depositAmount\":1000, \"protectedApy\":0.01, \"fundingApy\":\"0.1098\", \"inputApyDefinition\":\"AaveLendingAPY\" } ] } Output Parameters Field Name Type Description code int 0 indicates that the return result is normal message string Error message returned in case of an exception value list[object] Object Field Name Type Description vault string Contract address chainId int Chain ID riskType string Risk type: PROTECTED, RISKY forCcy string Underlying currency domCcy string Currency pair depositCcy string Subscription currency lowerBarrier number Lower price upperBarrier number Upper price depositAmount number RFQ purchase amount expiry long Expiry timestamp (e.g., 1672387200) protectedReturnAmount number Total amount of guaranteed return, in the same unit as depositCcy fundingAmount number Estimated yield for the period; zero for non-guaranteed types enhancedReturnAmount number Total amount of extra return when not knocked out, in the same unit as depositCcy timestamp long Current pricing's trigger time; the next observation start time is calculated based on this logic observationStart long Estimated start time of observation for knocking in/out based on timestamp quote object anchorPrices list[string] 20000000000, 30000000000 makerCollateral string Maker's collateral amount totalCollateral string Total collateral amount (Taker+Maker) collateralAtRiskPercentage string Required when guaranteed (can be empty) deadline long Expiration timestamp (e.g., 1672387200) makerWallet string Maker's wallet (can be empty) signature string Signature (can be empty) Output Parameters example { \"succ\":true, \"code\":0, \"message\":\"\", \"value\":[ { \"chainId\":80001, \"vault\":\"0x0E3a24ed24fBfF5406C8529fBe3Cc4DFE12b1cDB\", \"riskType\":\"PROTECTED\", \"forCcy\":\"WETH\", \"domCcy\":\"USDT\", \"depositCcy\":\"USDT\", \"lowerBarrier\":\"2775\", \"upperBarrier\":\"2825\", \"depositAmount\":\"1000\", \"expiry\":\"1708416000\", \"timestamp\":\"1708142778\", \"protectedReturnAmount\":\"0.08219178\", \"fundingAmount\":\"0.90246575\", \"enhancedReturnAmount\":\"3.69018697\", \"observationStart\":\"1708156800\", \"quote\":{ \"anchorPrices\":[ \"2775000000\", \"2825000000\" ], \"makerCollateral\":\"2869913\", \"totalCollateral\":\"1002869913\", \"collateralAtRiskPercentage\":\"3631\", \"deadline\":\"1708143378\", \"makerWallet\":\"0xDFD6f6a6c1AB0184a483F1c7f691f1ea6B810e55\", \"signature\":null } }, { \"chainId\":80001, \"vault\":\"0x0E3a24ed24fBfF5406C8529fBe3Cc4DFE12b1cDB\", \"riskType\":\"PROTECTED\", \"forCcy\":\"WETH\", \"domCcy\":\"USDT\", \"depositCcy\":\"USDT\", \"lowerBarrier\":\"2775\", \"upperBarrier\":\"2825\", \"depositAmount\":\"1000\", \"expiry\":\"1708761600\", \"timestamp\":\"1708142781\", \"protectedReturnAmount\":\"0.19178082\", \"fundingAmount\":\"2.10575342\", \"enhancedReturnAmount\":\"21.6891866\", \"observationStart\":\"1708156800\", \"quote\":{ \"anchorPrices\":[ \"2775000000\", \"2825000000\" ], \"makerCollateral\":\"19775214\", \"totalCollateral\":\"1019775214\", \"collateralAtRiskPercentage\":\"21123\", \"deadline\":\"1708143381\", \"makerWallet\":\"0xDFD6f6a6c1AB0184a483F1c7f691f1ea6B810e55\", \"signature\":null } } ] } Inquiry Notes: Please do not pass the user's wallet address on a pure inquiry request. A user's wallet address should be passed on only upon subscribing. GET /rfq/dnt/quote Input Parameters Field Name Required Type Description vault true string Contract information chainId true int Chain ID expiry true long Second-level timestamp for the expiry date, e.g., 1672387200 lowerBarrier true number Lower price upperBarrier true number Upper price depositAmount true number RFQ purchase amount inputApyDefinition true string The underlying code is Enum indicating how the input APY is calculatedOptimusDefaultAPY, BinanceDntAPY, AaveLendingAPY protectedApy false number Guaranteed annual yield (empty for RISKY, required for protected) fundingApy false number AAVE annual yield (empty for RISKY, required for protected) takerWallet false string Inquirer's wallet public address information Output Parameters Field Name Type Description code int 0 indicates that the return result is normal message string Error message returned in case of an exception value list[object] Object Field Name Type Description vault string Contract address chainId int Chain ID riskType string Risk type: PROTECTED, RISKY forCcy string Underlying currency domCcy string Currency pair depositCcy string Subscription currency lowerBarrier number Lower price upperBarrier number Upper price depositAmount number RFQ purchase amount expiry long Expiry timestamp (e.g., 1672387200) protectedReturnAmount number Total amount of guaranteed return, in the same unit as depositCcy fundingAmount number Estimated yield for the period; zero for non-guaranteed types enhancedReturnAmount number Total amount of extra return when not knocked out, in the same unit as depositCcy timestamp long Current pricing's trigger time; the next observation start time is calculated based on this logic observationStart long Estimated start time of observation for knocking in/out based on timestamp quote object anchorPrices list[string] 20000000000, 30000000000 makerCollateral string Maker's collateral amount totalCollateral string Total collateral amount (Taker+Maker) collateralAtRiskPercentage string Required when guaranteed (can be empty) deadline long Expiration timestamp (e.g., 1672387200) makerWallet string Maker's wallet (can be empty) signature string Signature (can be empty) "},"02-protocols/01-dcv-exotic/02-developers/03-subgraphs.html":{"url":"02-protocols/01-dcv-exotic/02-developers/03-subgraphs.html","title":"Subgraphs","keywords":"","body":"Subgraphs We support the development of efficient and responsive applications by providing real-time and accurate blockchain data access through the use of The Graph's indexing protocol. Subgraphs are a powerful tool that allows us to index data stored on Ethereum and query this data via GraphQL. Here is how you can utilize custom subgraphs to query related data within the protocol: Accessing Our Subgraph We have created specific subgraphs for the protocol's data. These subgraphs contain various entities indexed from the blockchain, such as transactions, accounts, and specific events related to our DeFi products. You can query data in the subgraph via the following steps: Step 1: Find the Endpoint Locate the GraphQL endpoint URL corresponding to the subgraph you wish to interact with. This typically appears as a web address link. Please ensure you are using the most up-to-date endpoint. Step 2: Understand the Schema The schema describes the entities within the subgraph and the types of queries that can be performed. Understanding the schema is crucial for writing efficient queries. Step 3: Write a GraphQL Query Based on the schema, you can start writing GraphQL queries to query data from the subgraph. GraphQL allows for very specific queries, requesting only the fields you are interested in. For example, if you want to query detailed information for each transaction, you might write a query like this: { transactions(first: 5) { id from to value blockNumber } } This will return transactions and their related details for the first five records on the blockchain. Step 4: Send the Query Request Send your query request using any HTTP client that supports GraphQL. You can use a command-line tool such as curl, or a library integrated into your application, like apollo-client. Typically, the request is sent as a POST request to the endpoint URL. An example code using curl is as follows: curl -X POST -H \"Content-Type: application/json\" --data '{\"query\": \"{ transactions(first: 5) { id from to value blockNumber } }\"}' https://api.thegraph.com/subgraphs/name/sofa-org/subgraph-name Replace subgraph-name with the actual subgraph name, and determine the URL based on the actual situation. Step 5: Analyze and Use the Response After your query request is sent, the GraphQL service will return the response in JSON format. You can process this data in your application or directly display it to users on the front end. Best Practices Use Query Variables: If you frequently need to perform queries of the same structure but with different parameters, using query variables can make it easier to reuse your queries. Handle Errors: In addition to normal responses, GraphQL can also return error information. Make sure your client code can gracefully handle these situations. By following the above steps, you can effectively use The Graph to query data on the SOFA protocol to support your development projects. Please refer to the rest of our developer documentation and Subgraph related resources for further information. "},"02-protocols/01-dcv-exotic/02-developers/04-bug-bounty.html":{"url":"02-protocols/01-dcv-exotic/02-developers/04-bug-bounty.html","title":"Bug Bounty Program","keywords":"","body":"Bug Bounty Program SOFA.org places great emphasis on user security and platform robustness. We recognize that security risks and vulnerabilities will always exist no matter how 'secure' the system appears to be. As such, to encourage community members to jointly contribute to our security efforts, we have launched a Bug Bounty program in collaboration with Immunefi. This program is designed to reward white-hat hackers who spot and report potential security risks within our ecosystem. Joining Our Bug Bounty Program To participate in the Bug Bounty program with SOFA.org, please see the following steps: Familiarize Yourself with Bounty Details: Visit our project page on Immunefi and thoroughly read the severity classifications, reward guidelines, and reporting requirements we have provided. We recommend that you read carefully to ensure you understand which types of vulnerabilities are eligible for rewards. Conduct Security Testing: Start testing the SOFA protocol's smart contracts, dApp interfaces, or any related infrastructure based on your area of expertise. Please adhere to responsible disclosure principles and avoid any testing behavior that could lead to actual asset losses. Submit a Report: If you believe you have found a valid security issue, please submit a detailed vulnerability report through Immunefi. Y our report should include a complete description of the issue, including steps to reproduce the vulnerability, its potential impact, and (if possible) a suggestion for mitigating or fixing the vulnerability. Wait for a Security Review: Our security team will review your report and work with you to verify the vulnerability. Please keep communication channels open so we can resolve the issue quickly and efficiently. Receive Your Reward: Once the severity of the vulnerability has been verified and corrective measures have been implemented, eligible reports will receive rewards. The reward amount will be assessed based on the severity and potential impact of the vulnerability. Reward Criteria The amount of the reward is based on the severity of the vulnerability, typically categorized into several levels ranging from Critical to Low. Specific reward amounts and criteria can be found on our Immunefi project page. Important Reminders Do Not Disclose Issues Publicly: Please do not publicly disclose any details before the issue is fixed to avoid potential malicious exploitation. Please Adhere to All Relevant Rules: When participating in testing, please adhere to all applicable laws and rules. We hope that through this Bug Bounty program, we can work together with the community to effectively bolster the security and integrity of the SOFA.org ecosystem. We look forward to interacting with security researchers and community experts to help discover and fix potential vulnerabilities, leading to a stronger, safer, and more reliable DeFi ecosystem for everyone to enjoy. "},"02-protocols/02-dcv-leverage.html":{"url":"02-protocols/02-dcv-leverage.html","title":"DCV-Leverage (Leverage Structured Product)","keywords":"","body":"DCV-Leverage (Leverage Structured Product) COMING SOON... "},"02-protocols/03-dcv-wm.html":{"url":"02-protocols/03-dcv-wm.html","title":"DCV-WM (Dynamic Allocation Pool for DCV-EXOTIC)","keywords":"","body":"DCV-WM (Dynamic Allocation Pool for DCV-EXOTIC) COMING SOON... "},"03-security/":{"url":"03-security/","title":"ðŸ” Protocol Security Considerations","keywords":"","body":" Protocol Security Considerations Security has been our primary and utmost focus since inception. The spirit of blockchain is trustless decentralisation, with the trustless component contingent on air-tight security and asset safety. Ultimately, the core of the entire DeFi ecosystem hinges on asset safety, so ensuring zero-risk to user funds is the primary driver behind every part of our design. In the spirit of full transparency, we have written a FAQ to cover some of the common questions on and decisions behind our protocol architectural, code implementation, testing, contract audits, time locks, and bug bounty programs, particularly in terms of how they contribute to maximizing the security and safety of the SOFA.org protocols. Frequently Asked Questions (FAQ): Protocol Architecture How do you handle collateral management and liquidation risks as a settlement and clearing platform? The SOFA.org protocols work off an innovative, fully funded model which requires both entities to pre-fund their maximum exposures into the vault upon execution. The net exposures are zero-sum by nature, so the capital at risk never exceeds what's originally deposited at trade inception. No margin calculations are required in the interim, with no risks of flash loan attacks either. Liquidty is unlocked via the use of replicating Position Tokens (ERC-1155), allowing the transfer of the ownership claim without infringing on the underlying collateral. How are the different vaults and contracts interconnected? Are locked assets properly segregated? How are assets transferred upon final settlement? Individual vaults are built to serve each individual structured product type and its associated collateral. Vaults exist individually without cross-dependencies on each other. Locked assets are contained within the specific vault contract linked to its traded product type, and can only be redeemed by the holders of Position Tokens, or converted into fees and repurchased into the $RCH pool by the FeeCollector contract. There are no other ways to transfer assets within the contract otherwise. How does SOFA.org ensure the accuracy and integrity of its pricing data to mitigate pricing discrepancy or manipulation concerns on settlement fixing calculations? We will utilize ChainLink's services to provide decentralized pricing references, via their time-tested DataFeeds (for spot) and Functions (for historical) methods. The Functions method will publish Coinbase API data directly on the contract on-chain, with the underlying code being fully transparent and verifiable by anyone in the public domain. Additionally, the protocol will also use TheGraph to synchronize historical data from the dAPP, with the query service also being a transparent and inspectable code that is visible to everyone. Can you please explain what you mean by a \"fair launch\" of the protocol's native $RCH tokens? The protocol's tokenomics model will be a 'fair launch' format where no participant, not even the core development team, will be allocated any tokens ahead of time. Out of the fixed 37M float, the initial 25M of $RCH tokens will minted into a Uniswap pool along with burned LP tokens (ie. captive liquidity), while the final remaining 12M of $RCH tokens can only be obtained through transaction (usage) airdrops. The lack of up-front allocation, and the steady usage-based accumulation should ensure a more balanced token supply/demand picture upon TGE. This should help minimize the risks of 'liquidity dumps' and other typical 'post-cliff' exit liquidity issues that have plagued many other token projects. Smart Contract Code All of our smart contract code will be publicly released on Github under sofa-org, allowing full public access and validation. We have adopted the MIT permissive software license, encouraging and inviting more collaborative development efforts on expanding the protocol's ecosystem. Added reentrancy checks to all methods involving fund transfers to minimize vulnerability. Reduced all bloated and unnecessary permission management processes over the multi-sig process, minimizing human errors over permission mis-use or private key leakage. Full Solidity (0.8.10) adoption to ensure compatibility in compiling all contracts while preventing vulnerabilities due to different compiler versions. Used OpenZeppelin's standard contracts to avoid introducing vulnerabilities through development redundancies. DNTVault Design AAVEDNTVault Design SmartTrendVault Design AAVESmartTrendVault Design Testing Tested coverage for non-mock contracts, demonstrating that statements, functions, and lines coverage all reached 100%. Used a variety of automated contract audit tools, such as Slither. Audit SOFA.org has invited the most reputable and professional security firms in the industry to audit our contracts. We view auditing as an ongoing process and will continue to invite more auditors into the mix as the protocol evolves. PeckShield Timelock All owner permissions for deployed contracts will be on Timelock contracts. As such, any changes submitted by developers will only take effect after 24 hours, giving ample reaction time for users to withdraw their funds should there be issues introduced with a code update. Changes to submitted Timelock contracts will require approval from multi-signature wallets, ensuring that all code changes will be reviewed and scrutinized by multiple participants before being pushed. Bug Bounty We will bug bounty programs on security platforms. These programs offer generous rewards to those who find and identify vulnerabilities, helping reinforce the security foundation of the SOFA.org ecosystem. In summary, SOFA.org wants to foster a fair, decentralized, open-source and transparent working community striking for the common goal of building a better DeFi system. We hope and encourage every member of the community to join and contribute on this journey together. As always, we are looking for better ways to enhance the security foundation of our protocol, and we are open to and welcome your valuable suggestions on this front. "},"04-tokenomics/":{"url":"04-tokenomics/","title":"ðŸ“ˆ Tokenomics and Governance","keywords":"","body":" Dual-token model SOFA.org has meticulously designed a dual-token model to operate ecosystem tokenomics. The protocol's native utility token is called $RCH, while the governance token is appropriately named $SOFA. "},"04-tokenomics/01-rch.html":{"url":"04-tokenomics/01-rch.html","title":"$RCH Utility Token","keywords":"","body":"$RCH Utility Token $RCH is the core token within the SOFA ecosystem, embodying its entire value creation. Unlike the maturity of other protocols, $RCH will be launched in a true 'fair launch' manner, with no pre-sales allocations to any interest group - not even to the core development team or investors. The only way to acquire $RCH is by using and executing transactions within the SOFA.org protocols, or via referral rewards at a later time. The team has taken a completely selfless and unorthodox approach to ensure that all value accrual will exclusively be rolling up to the protocol's core users. We want to make sure that the protocol is setup to benefit over the long-run, and free from toxic short-term pump-and-dump behaviour that doomed numerous DeFi projects in the past. Acquiring $RCH Tokens The only way to obtain $RCH is to transact and execute transactions with the SOFA.org ecosystem. A set amount of $RCH will be airdropped daily to our protocol users, with received rewards to be split pro-rata based on the user's transaction volumes on the day. DailyÂ RCHÂ airdropÂ forÂ aÂ trader=DailyÂ tradingÂ volumeÂ madeÂ byÂ him/herTotalÂ dailyÂ tradingÂ volumeÂ Ã—DailyÂ RCHÂ airdropÂ distributedÂ toÂ allÂ traders \\text{Daily RCH airdrop for a trader}=\\dfrac{\\text{Daily trading volume made by him/her}}{\\text{Total daily trading volume }}\\times \\text{Daily RCH airdrop distributed to all traders} DailyÂ RCHÂ airdropÂ forÂ aÂ trader=â€‹TotalÂ dailyÂ tradingÂ volumeÂ â€‹â€‹DailyÂ tradingÂ volumeÂ madeÂ byÂ him/herâ€‹â€‹Ã—DailyÂ RCHÂ airdropÂ distributedÂ toÂ allÂ traders $RCH Token Float Total supply of $RCH is capped at 37,000,000. 60% of $RCH supply (25 million) is pre-minted and locked in a Uniswap liquidity pool (vs ETH), while the remaining 40% will be released on a pre-determined airdrop schedule to protocol users and supporters. 100% of all SOFA.org protocol revenues will be used to purchase and burn $RCH from Uniswap's LP pool. As transaction volumes increase, the outstanding float of $RCH will decrease as burn rates overwhelm the daily airdrops. This creates a net deflationary supply drain, pushing up the price of $RCH into a higher equilibrium, with benefits accuring completely to token holders (users). Over the long-term, price accretion on RCH should be a direct reflection of the protocol's accumulated usage, aligning the success of the protocol with significant capital gains to our core users and token holders. $RCH Tokenomics Breakdown Basic Vault At project launch, 60% of $RCH (25 million tokens) is pre-minted and placed into Uniswap's L3 pool on Ethereum along with $500,000 of ETH. This pool of $RCH and ETH is referred to as the 'Basic Vault'. Please note, the Basic Vault is not owned by anyone. After depositing into the LP, the corresponding Uniswap LP tokens are promptly destroyed, ensuring that the initial liquidity of the Basic Vault can never be withdrawn. This guarantees that the $RCH float available will eventually be far less than what was originally locked into the LP, thereby setting an effective floor on the value of $RCH at its initial price. Airdrop Rewards for Traders Furthermore, the remaining 40% (12 million tokens) of $RCH will be airdropped to ecosystem users according to a pre-determined release schedule. Initially, 12,500 of $RCH tokens will be airdropped daily over the first 180 days. After which, the airdropped amounts will decrease by an incremental 20% every 180 days ad infinitum. Days after Launch Daily Airdrop 0 12,500 180 10,000 360 8,000 540 6,400 720 5,120 900 4,096 1080 3,276.8 â€¦â€¦ â€¦â€¦ Hypothetical $RCH Float Scenario (LP + Cumulative Airdrops) Base assumptions 0.02% protocol service fee, 1,000,000 USDT in day 1 protocol TVL with 2% daily growth, 12.5k in daily notional $RCH airdrops with 50% sold back into LP pool Positive Reflexivity with Self-Correcting Downside Adjustments Given its deflationary supply model, increased protocol transactions should lead to a higher $RCH price. As the utility token's price increases, so does the value of the upcoming airdrops, which encourages additional transactions and creates a positive feedback loop for the entire ecosystem. On the other hand, should the token price fall precipitously for whatever reason, the USDT based protocol transaction fees will be able to burn a greater quantity of $RCH tokens from the daily buyback operations. This serves as a powerful, self-correcting adjustment to stabilize the token price, until the daily transactions can catch-up to resume a net supply deficit and restart the upward $RCH price trajectory. No Exit-Liquidity Dumps Learning from the experience of prior projects, $RCH's fair launch mechanism will eliminate any negative 'cliff vesting' impacts or insider liquidity dumps as no party is entitled to any $RCH at launch. Furthermore, the initial liquidity of the Basic Vault is locked and cannot be withdrawn by its contributors, ensuring a minimum level of liquidity regardless of market developments. Finally, as long as protocol transactions continue to happen, this should be a net deflationary supply impact on $RCH, granting the token price a very strong tailwind for the long-haul. Infinitely Scalable Ecosystem In the future, any aspiring DeFi project that meets the standards of SOFA.org can apply to join the ecosystem as a protocol partner. Benefits of Joining the Ecosystem Recommendation by SOFA.org as a DeFi project that observes and upholds the association's decentralized values and design, serving as an expedited pathway to connect with rest of the SOFA ecosystem. Transactions within the greater SOFA ecosystem also qualify for the daily $RCH airdrops. Prerequisites for Joining the Ecosystem Adherence to True DeFi Standards: Projects must meet the true DeFi standards set forth by SOFA.org, supporting the continued growth of the decentralisation mission. Allocation of Fees to Burn the Native Token: Projects should allocate all or a portion of their transaction fees to burn the $RCH token, contributing to the deflationary mechanism and accelerating the value creep to our loyal users. Approval through Collective Voting by $SOFA Holders: Projects must be approved to join the ecosystem through a collective voting process by $SOFA token holders as a form of community endorsement. As more protocols join the SOFA.org ecosystem, more transaction fees will be allocated towards token buybacks, creating profound gains for our token holders. At the same time, we would also have succeeded in breaking new grounds on how digital assets can be settled on-chain, while offering a robust tri-party solution for mitigating counterparty risks across both DeFi and CeFi platforms. "},"04-tokenomics/02-sofa.html":{"url":"04-tokenomics/02-sofa.html","title":"$SOFA Governance Token","keywords":"","body":"$SOFA Governance token The $SOFA token is the governance token of the SOFA.org ecosystem. As a decentralized, non-profit, open-source technology organization, all decisions within the SOFA.org ecosystem are determined by votes from $SOFA token holders. Uses of the $SOFA Token As a pure governance token, $SOFA does not participate in any profit sharing within the ecosystem. Instead, it focuses on maintaining a healthy, long-term development of the SOFA.org ecosystem via governance voting decisions. Subject Matters Pertaining to Governance Votes: Types of financial products to be onboarded Determination of the eligible basket of supported collateral (USDT etc.) Admission of new partner protocols into the SOFA.org ecosystem Distribution mix % of daily $RCH airdrops between the various on-boarded products Distribution mix % of daily $RCH airdrops amongst ecosystem protocols Pace of $RCH airdrops And other decisions to come as the ecosystem matures Acquiring $SOFA Tokens Early Association Members and Developers: SOFA.org is well-attended and supported by some of the most influential Web3 institutions and builders, who will be providing the initial as well as on-going infrastructure support of the ecosystem Ecosystem Advisors: Web3 industry and thought leaders who are sharing their wisdom for the continued betterment of the project Active Community Members: Users and members who are actively participating in our public community activities during the initial stages of the project. Early Position Token Recognition: For both CeFi and DeFi partners who are able to early-adopt and recognize our Position Tokens as eligible collateral on their platforms. Early AMM Liquidity Contributors: Project supporters who graciously contributed non-withdrawable ETH liquidity to the initial Uniswap LP for the $RCH pool. Exchange from $RCH: All users can obtain $SOFA by burning $RCH on a 1:1 conversion basis, thereby exchanging their utility rights for governance votes. "}}